{
  "instance_id": "pvlib__pvlib-python-1072",
  "model_name_or_path": "anthropic/claude-sonnet-4-20250514",
  "model_patch": "diff --git a/pvlib/pvsystem.py b/pvlib/pvsystem.py\nindex fecc930..90e7397 100644\n--- a/pvlib/pvsystem.py\n+++ b/pvlib/pvsystem.py\n@@ -1942,7 +1942,7 @@ def singlediode(photocurrent, saturation_current, resistance_series,\n \n \n def max_power_point(photocurrent, saturation_current, resistance_series,\n-                    resistance_shunt, nNsVth, d2mutau=0, NsVbi=np.Inf,\n+                    resistance_shunt, nNsVth, d2mutau=0, NsVbi=np.inf,\n                     method='brentq'):\n     \"\"\"\n     Given the single diode equation coefficients, calculates the maximum power\n@@ -1989,7 +1989,7 @@ def max_power_point(photocurrent, saturation_current, resistance_series,\n     \"\"\"\n     i_mp, v_mp, p_mp = _singlediode.bishop88_mpp(\n         photocurrent, saturation_current, resistance_series,\n-        resistance_shunt, nNsVth, d2mutau=0, NsVbi=np.Inf,\n+        resistance_shunt, nNsVth, d2mutau=0, NsVbi=np.inf,\n         method=method.lower()\n     )\n     if isinstance(photocurrent, pd.Series):\ndiff --git a/pvlib/singlediode.py b/pvlib/singlediode.py\nindex b800e1c..e056d7d 100644\n--- a/pvlib/singlediode.py\n+++ b/pvlib/singlediode.py\n@@ -56,7 +56,7 @@ def estimate_voc(photocurrent, saturation_current, nNsVth):\n \n def bishop88(diode_voltage, photocurrent, saturation_current,\n              resistance_series, resistance_shunt, nNsVth, d2mutau=0,\n-             NsVbi=np.Inf, breakdown_factor=0., breakdown_voltage=-5.5,\n+             NsVbi=np.inf, breakdown_factor=0., breakdown_voltage=-5.5,\n              breakdown_exp=3.28, gradients=False):\n     r\"\"\"\n     Explicit calculation of points on the IV curve described by the single\n@@ -204,7 +204,7 @@ def bishop88(diode_voltage, photocurrent, saturation_current,\n \n def bishop88_i_from_v(voltage, photocurrent, saturation_current,\n                       resistance_series, resistance_shunt, nNsVth,\n-                      d2mutau=0, NsVbi=np.Inf, breakdown_factor=0.,\n+                      d2mutau=0, NsVbi=np.inf, breakdown_factor=0.,\n                       breakdown_voltage=-5.5, breakdown_exp=3.28,\n                       method='newton'):\n     \"\"\"\n@@ -292,7 +292,7 @@ def bishop88_i_from_v(voltage, photocurrent, saturation_current,\n \n def bishop88_v_from_i(current, photocurrent, saturation_current,\n                       resistance_series, resistance_shunt, nNsVth,\n-                      d2mutau=0, NsVbi=np.Inf, breakdown_factor=0.,\n+                      d2mutau=0, NsVbi=np.inf, breakdown_factor=0.,\n                       breakdown_voltage=-5.5, breakdown_exp=3.28,\n                       method='newton'):\n     \"\"\"\n@@ -378,7 +378,7 @@ def bishop88_v_from_i(current, photocurrent, saturation_current,\n \n \n def bishop88_mpp(photocurrent, saturation_current, resistance_series,\n-                 resistance_shunt, nNsVth, d2mutau=0, NsVbi=np.Inf,\n+                 resistance_shunt, nNsVth, d2mutau=0, NsVbi=np.inf,\n                  breakdown_factor=0., breakdown_voltage=-5.5,\n                  breakdown_exp=3.28, method='newton'):\n     \"\"\"\n@@ -688,3 +688,7 @@ def _pwr_optfcn(df, loc):\n                            df['nNsVth'], df[loc], df['i_0'], df['i_l'])\n \n     return I * df[loc]\n+\n+\n+\n+\ndiff --git a/pvlib/temperature.py b/pvlib/temperature.py\nindex 1d98736..531a346 100644\n--- a/pvlib/temperature.py\n+++ b/pvlib/temperature.py\n@@ -599,7 +599,7 @@ def fuentes(poa_global, temp_air, wind_speed, noct_installed, module_height=5,\n     # n.b. the way Fuentes calculates the first timedelta makes it seem like\n     # the value doesn't matter -- rather than recreate it here, just assume\n     # it's the same as the second timedelta:\n-    timedelta_hours = np.diff(poa_global.index).astype(float) / 1e9 / 60 / 60\n+    timedelta_hours = pd.TimedeltaIndex(np.diff(poa_global.index)).total_seconds() / 3600\n     timedelta_hours = np.append([timedelta_hours[0]], timedelta_hours)\n \n     tamb_array = temp_air + 273.15\n@@ -657,3 +657,4 @@ def fuentes(poa_global, temp_air, wind_speed, noct_installed, module_height=5,\n         sun0 = sun\n \n     return pd.Series(tmod_array - 273.15, index=poa_global.index, name='tmod')\n+\ndiff --git a/pvlib/tests/test_singlediode.py b/pvlib/tests/test_singlediode.py\nindex ee20e48..a5186f4 100644\n--- a/pvlib/tests/test_singlediode.py\n+++ b/pvlib/tests/test_singlediode.py\n@@ -203,7 +203,7 @@ def test_pvsyst_recombination_loss(method, poa, temp_cell, expected, tol):\n         # other conditions with breakdown model on and recombination model off\n         (\n             (1.e-4, -5.5, 3.28),\n-            (0., np.Inf),\n+            (0., np.inf),\n             POA,\n             TCELL,\n             {\ndiff --git a/pvlib/tests/test_temperature.py b/pvlib/tests/test_temperature.py\nindex 245c5d2..8e6a9ac 100644\n--- a/pvlib/tests/test_temperature.py\n+++ b/pvlib/tests/test_temperature.py\n@@ -190,3 +190,43 @@ def test_fuentes(filename, inoct):\n     night_difference = expected_tcell[is_night] - actual_tcell[is_night]\n     assert night_difference.max() < 6\n     assert night_difference.min() > 0\n+\n+\n+def test_fuentes_tz_aware():\n+    # Test that fuentes works with timezone-aware DatetimeIndex\n+    # GitHub issue: timezone-aware inputs cause errors in pandas>=1.0.0\n+    times_naive = pd.date_range('2019-01-01', freq='h', periods=3)\n+    inputs_naive = {\n+        'poa_global': pd.Series(1000, index=times_naive),\n+        'temp_air': pd.Series(20, index=times_naive),\n+        'wind_speed': pd.Series(1, index=times_naive),\n+        'noct_installed': 45\n+    }\n+    \n+    # Test with timezone-aware UTC index\n+    times_utc = times_naive.tz_localize('UTC')\n+    inputs_utc = {\n+        'poa_global': pd.Series(1000, index=times_utc),\n+        'temp_air': pd.Series(20, index=times_utc),\n+        'wind_speed': pd.Series(1, index=times_utc),\n+        'noct_installed': 45\n+    }\n+    \n+    result_naive = temperature.fuentes(**inputs_naive)\n+    result_utc = temperature.fuentes(**inputs_utc)\n+    \n+    # Results should be identical\n+    assert_allclose(result_naive.values, result_utc.values)\n+    \n+    # Test with a different timezone\n+    times_mst = times_naive.tz_localize('US/Mountain')\n+    inputs_mst = {\n+        'poa_global': pd.Series(1000, index=times_mst),\n+        'temp_air': pd.Series(20, index=times_mst),\n+        'wind_speed': pd.Series(1, index=times_mst),\n+        'noct_installed': 45\n+    }\n+    \n+    result_mst = temperature.fuentes(**inputs_mst)\n+    assert_allclose(result_naive.values, result_mst.values)\n+\n",
  "exit_status": "MaxTurns",
  "cost": 3.530900999999999,
  "tool_calls": 50,
  "time": 345.1200954914093
}