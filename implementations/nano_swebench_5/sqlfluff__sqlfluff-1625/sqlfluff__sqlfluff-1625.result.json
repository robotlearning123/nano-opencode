{
  "instance_id": "sqlfluff__sqlfluff-1625",
  "model_name_or_path": "anthropic/claude-sonnet-4-20250514",
  "model_patch": "diff --git a/src/sqlfluff/rules/L031.py b/src/sqlfluff/rules/L031.py\nindex 838c6ce5d..bd266de81 100644\n--- a/src/sqlfluff/rules/L031.py\n+++ b/src/sqlfluff/rules/L031.py\n@@ -80,6 +80,12 @@ class Rule_L031(BaseRule):\n             if from_expression_element:\n                 base_table = from_expression_element.get_child(\"object_reference\")\n \n+            # Check if there are any JOIN clauses\n+            # If no joins, then we don't need to check for aliases in join conditions\n+            join_clauses = list(from_clause_segment.recursive_crawl(\"join_clause\"))\n+            if not join_clauses:\n+                return None\n+\n             from_clause_index = segment.segments.index(from_clause_segment)\n             from_clause_and_after = segment.segments[from_clause_index:]\n \n@@ -217,3 +223,4 @@ class Rule_L031(BaseRule):\n             )\n \n         return violation_buff or None\n+\ndiff --git a/test/fixtures/rules/std_rule_cases/L031.yml b/test/fixtures/rules/std_rule_cases/L031.yml\nindex 40b41639a..35496a395 100644\n--- a/test/fixtures/rules/std_rule_cases/L031.yml\n+++ b/test/fixtures/rules/std_rule_cases/L031.yml\n@@ -79,12 +79,12 @@ test_fail_avoid_aliases_3:\n     order by o desc\n \n alias_single_char_identifiers:\n-  fail_str: \"select b from tbl as a\"\n-  fix_str: \"select b from tbl\"\n+  # Allow aliases when there's no join (issue: TSQL - L031 incorrectly triggers)\n+  pass_str: \"select b from tbl as a\"\n \n alias_with_wildcard_identifier:\n-  fail_str: \"select * from tbl as a\"\n-  fix_str: \"select * from tbl\"\n+  # Allow aliases when there's no join (issue: TSQL - L031 incorrectly triggers)\n+  pass_str: \"select * from tbl as a\"\n \n select_from_values:\n   pass_str: |\n@@ -168,3 +168,4 @@ issue_1589:\n               rnd>=t.v\n          order by rnd\n          limit 1)\n+\n",
  "exit_status": "Submitted",
  "cost": 1.891566,
  "tool_calls": 48,
  "time": 266.3166081905365
}